<!doctype html>
<html>
  <head>
    <title>Menu - Shri Ram Restaurant</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./css/menu.css" />
  </head>

  <body>
    <!-- ===== NAVBAR ===== -->
    <div class="navbar">
      <div class="logo">ğŸ½ï¸ Shri Ram Restaurant</div>
      <div class="nav-links">
        <a href="index.html">ğŸ  Home</a>
        <a href="menu.html">ğŸ“‹ Menu</a>
        <a href="cart.html">ğŸ›’ Cart</a>
        <a href="orders.html">ğŸ“¦ Orders</a>
        <a href="#" onclick="logout()">ğŸšª Logout</a>
      </div>
    </div>

    <!-- ===== HERO SECTION ===== -->
    <div class="menu-hero">
      <div class="hero-content">
        <h1>Delicious Food, Delivered Fresh ğŸ•</h1>
        <p>Experience premium taste crafted with love</p>
      </div>
    </div>

    <!-- ===== MENU SECTION ===== -->
    <section class="menu-section">
      <h2 class="section-title">Our Special Menu</h2>
      <div id="foods" class="food-grid"></div>
      <p id="noFoodMessage" class="no-food" style="display: none">
        No food items available yet.
      </p>
    </section>

    <script>
      /* ===========================
   LOGIN CHECK
=========================== */
      function checkLogin() {
        const user = localStorage.getItem("user");
        if (!user) {
          alert("Please login first!");
          window.location.href = "login.html";
        }
      }

      /* ===========================
   LOAD FOODS FROM BACKEND
=========================== */
function loadFoods() {
  fetch("http://localhost:5000/api/foods")
    .then(res => res.json())
    .then(data => {

      const foodsDiv = document.getElementById("foods");
      const noFood = document.getElementById("noFoodMessage");

      foodsDiv.innerHTML = "";

      if (!data || data.length === 0) {
        noFood.style.display = "block";
        return;
      }

      noFood.style.display = "none";

      data.forEach(food => {

        const imageName = food.name.trim().toLowerCase();
        const imagePath = `images/${imageName}.jpg`;  // âœ… CORRECT

        foodsDiv.innerHTML += `
          <div class="food-card">
            <img src="${imagePath}" 
                 alt="${food.name}"
                 onerror="this.src='images/default.jpg'">

            <div class="food-info">
              <h3>${food.name}</h3>
              <p class="price">â‚¹${food.price}</p>
              <button onclick="addToCart(${food.id}, '${food.name}', ${food.price})">
                Add to Cart
              </button>
            </div>
          </div>
        `;
      });

    })
    .catch(err => {
      console.error("Error loading foods:", err);
    });
}
      /* ===========================
   ADD TO CART
=========================== */
      function addToCart(id, name, price) {
        let cart = JSON.parse(localStorage.getItem("cart")) || [];

        cart.push({ id, name, price });

        localStorage.setItem("cart", JSON.stringify(cart));

        alert("Added to cart!");
      }

      /* ===========================
   LOGOUT
=========================== */
      function logout() {
        localStorage.removeItem("user");
        window.location.href = "login.html";
      }

      checkLogin();
      loadFoods();
    </script>
  </body>
</html>
